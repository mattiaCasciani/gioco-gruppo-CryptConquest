package Game;

public class Protagonista extends Personaggio {
    private String nome;

    public Protagonista(Double difesa, Double attacco, Double vita, String nome) throws Exception {
        super(difesa, attacco, vita);
        setNome(nome);
    }

    public Protagonista() {
        super();
    }

    public String getNome() {
        return nome;
    }

    public void setNome(String nome)throws Exception {
        try{
            this.nome = nome != "" ? nome : this.nome;
        }catch(NullPointerException ex ) {
            throw new Exception("ERRORE: Nome null");
        }
    }

    @Override
    public void setAttacco(Double attacco) throws Exception {
        super.setAttacco(attacco);
    }

    @Override
    public void setDifesa(Double difesa)throws Exception{
        super.setDifesa(difesa);
    }

    @Override
    public void setVita(Double vita)throws Exception{
        super.setVita(vita);
    }

   public boolean attacca(Mostro monster) throws Exception {
        boolean win = false;
        while (getVita() != 0 || monster.getVita() != 0) {
            if (getAttacco() > monster.getAttacco()) {
                if (getAttacco() < (monster.getVita() + monster.getDifesa())) {
                    monster.setVita(monster.getVita() + monster.getDifesa() - getAttacco());
                    monster.setDifesa(0.0);

                } else {
                    monster.setVita(0.0);
                    monster.setDifesa(0.0);
                }
                win = true;
            } else {
                if (monster.getAttacco() < (getVita() + getDifesa())) {
                    monster.setVita(monster.getVita() + monster.getDifesa() - getAttacco());
                    setDifesa(0.0);
                } else {
                    setVita(0.0);
                    setDifesa(0.0);
                }

            }
        }
        return win;
    }

    @Override
    public String info() {
        String out = "";
        out += nome != null ? "Protagonista{" +
                "nome='" + nome + '\'' +
                '}'+"\n"+super.info(): out;
        return out;
    }
}
